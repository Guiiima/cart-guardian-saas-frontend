<div class="container" [class.right-panel-active]="isRightPanelActive" id="container">

  <!-- REGISTRO -->
  <div class="form-container sign-up-container">
    <form [formGroup]="signUpForm" (ngSubmit)="onRegisterSubmit()">
      <h1>Criar Conta</h1>
      <span>Use o seu e-mail para o registo</span>

      <!-- Email -->
      <input type="email" placeholder="Email" formControlName="email" />
      @if (signUpForm.get('email')?.touched && signUpForm.get('email')?.errors?.['required']) {
        <div class="error-message">O email é obrigatório.</div>
      }
      @if (signUpForm.get('email')?.touched && signUpForm.get('email')?.errors?.['email']) {
        <div class="error-message">Digite um email válido.</div>
      }

      <!-- Senha -->
      <input type="password" placeholder="Password" formControlName="password" />
      @if (signUpForm.get('password')?.touched && signUpForm.get('password')?.errors?.['required']) {
        <div class="error-message">A senha é obrigatória.</div>
      }
      @if (signUpForm.get('password')?.touched && signUpForm.get('password')?.errors?.['minlength']) {
        <div class="error-message">A senha deve ter pelo menos 8 caracteres.</div>
      }
      @if (signUpForm.get('password')?.touched && signUpForm.get('password')?.errors?.['pattern']) {
        <div class="error-message">A senha deve conter letra maiúscula, minúscula e número.</div>
      }

      <!-- Confirmar Senha -->
      <input type="password" placeholder="Confirmar Password" formControlName="confirmPassword" />
      @if (signUpForm.get('confirmPassword')?.touched && signUpForm.get('confirmPassword')?.errors?.['required']) {
        <div class="error-message">Confirme a sua senha.</div>
      }
      @if (signUpForm.get('confirmPassword')?.touched && signUpForm.get('confirmPassword')?.errors?.['mismatch']) {
        <div class="error-message">As senhas não coincidem.</div>
      }

      <!-- Erro geral de registro -->
      @if (errorMessageRegister) {
        <div class="error-message">{{ errorMessageRegister }}</div>
      }

      <!-- Botão -->
      <button type="submit" [disabled]="isLoading || signUpForm.invalid">
        @if (!isLoading) {
          <span>Registar</span>
        } @else {
          <span>A Registar...</span>
        }
      </button>
    </form>
  </div>

  <!-- LOGIN -->
  <div class="form-container sign-in-container">
    <form [formGroup]="signInForm" (ngSubmit)="onLoginSubmit()">
      <h1>Login</h1>
      <span>Use a sua conta</span>

      <!-- Email -->
      <input type="email" placeholder="Email" formControlName="email" />
      @if (signInForm.get('email')?.touched && signInForm.get('email')?.errors?.['required']) {
        <div class="error-message">O email é obrigatório.</div>
      }
      @if (signInForm.get('email')?.touched && signInForm.get('email')?.errors?.['email']) {
        <div class="error-message">Digite um email válido.</div>
      }

      <!-- Senha -->
      <input type="password" placeholder="Password" formControlName="password" />
      @if (signInForm.get('password')?.touched && signInForm.get('password')?.errors?.['required']) {
        <div class="error-message">A senha é obrigatória.</div>
      }

      <!-- Erro geral de login -->
      @if (errorMessageLogin) {
        <div class="error-message">{{ errorMessageLogin }}</div>
      }

      <a href="/forgot-password">Esqueceu-se da palavra-passe?</a>
      <button type="submit" [disabled]="isLoading || signInForm.invalid">
        @if (!isLoading) {
          <span>Login</span>
        } @else {
          <span>Aguarde...</span>
        }
      </button>
    </form>
  </div>

  <!-- OVERLAY -->
  <div class="overlay-container">
    <div class="overlay">
      <div class="overlay-panel overlay-left">
        <h1>Bem-vindo de Volta!</h1>
        <p>Para se manter conectado, faça login com os seus dados pessoais</p>
        <button class="ghost" (click)="toggleSignIn()">Login</button>
      </div>
      <div class="overlay-panel overlay-right">
        <h1>Olá, Lojista!</h1>
        <p>Insira os seus dados de cadastro e comece a sua jornada com a gente.</p>
        <button class="ghost" (click)="toggleSignUp()">Registar</button>
      </div>
    </div>
  </div>
</div>
