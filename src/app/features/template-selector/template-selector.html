<div class="template-selector-container">

  <div class="header-container">
    <header class="selector-header">
      <h2>Selecione um Modelo para seu E-mail</h2>
      <p>Escolha um dos templates abaixo para personalizar os e-mails enviados aos seus clientes.</p>
    </header>

  </div>
    <div class="toolbar">

      <div class="view-toggle">
        @if (currentView === 'grid') {
        <button [class.active]="currentView === 'grid'" (click)="setView('list')" aria-label="Mudar para lista"
          title="Mudar para lista">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
            <path
              d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM9 2.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z" />
          </svg>
        </button>
        }
        @else {
        <button [class.active]="currentView === 'list'" (click)="setView('grid')" aria-label="Mudar para grade"
          title="Mudar para grade">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
            <path fill-rule="evenodd"
              d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
          </svg>
        </button>
        }
      </div>

      <div class="search-bar">
        <app-search></app-search>
      </div>
    </div>

  <div class="templates-grid" [ngClass]="{'view-list': currentView === 'list'}">

    @for (template of allTemplates; track template.id) {
    <div class="template-card" [class.selected]="selectedTemplateId === template.id" (click)="selectTemplate(template)">
      <div class="thumbnail">
        <img [src]="template.thumbnailUrl" [alt]="template.name" />
      </div>
      <div class="template-info">
        <h3>{{ template.name }}</h3>
        <p>{{ template.description }}</p>
      </div>
      <div class="template-actions">
        <button class="btn-preview" (click)="previewTemplate(template); $event.stopPropagation()">
          Pr√©-visualizar
        </button>
        <button class="btn-select" [class.selected]="selectedTemplateId === template.id">
          {{ selectedTemplateId === template.id ? 'Selecionado' : 'Selecionar' }}
        </button>
      </div>
    </div>
    } @empty {
    <div class="empty-state">
      <h2>Nenhum Template Encontrado</h2>
      <p>Tente ajustar os termos da sua busca ou limpar os filtros aplicados.</p>
      <button class="btn-clear-filters" (click)="clearFilters()">Limpar Filtros e Busca</button>
    </div>
    }
  </div>
</div>